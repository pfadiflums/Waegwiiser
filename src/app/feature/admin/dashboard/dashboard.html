<div class="dashboard-page">
  <!-- Welcome Hero -->
  <header class="dashboard-hero">
    <div class="hero-content">
      <div class="hero-text">
        <span class="greeting">Willkommen zurück!</span>
        <h1>Dein Überblick heute</h1>
        <p>Verwalte Übungen, Benutzer und Downloads für die Pfadi St. Justus.</p>
      </div>
      <div class="quick-actions">
        <button class="action-btn primary" routerLink="/admin/uebungen/new">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
          <span>Neue Übung</span>
        </button>
        <button class="action-btn secondary" routerLink="/admin/downloads">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
          <span>Download hinzufügen</span>
        </button>
      </div>
    </div>
    <div class="hero-visual">
      <div class="pattern-dots"></div>
    </div>
  </header>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <div class="stat-card uebungen">
      <div class="card-inner">
        <div class="stat-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats().uebungenCount }}</span>
          <span class="stat-label">Bevorstehende Übungen</span>
        </div>
      </div>
    </div>

    <div class="stat-card users">
      <div class="card-inner">
        <div class="stat-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats().usersCount }}</span>
          <span class="stat-label">Aktive Benutzer</span>
        </div>
      </div>
    </div>

    <div class="stat-card downloads">
      <div class="card-inner">
        <div class="stat-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats().downloadsCount }}</span>
          <span class="stat-label">Downloads</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Activities -->
  <div class="data-section">
    <div class="section-header">
      <div class="header-main">
        <div class="section-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
        </div>
        <div>
          <h2>Anstehende Übungen</h2>
          <p>Die nächsten Aktivitäten aller Stufen im Überblick.</p>
        </div>
      </div>
      <button class="view-all-btn" routerLink="/admin/uebungen">
        <span>Alle anzeigen</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
      </button>
    </div>

    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>Datum</th>
            <th>Aktivität / Motto</th>
            <th>Stufe</th>
            <th>Status</th>
            <th class="actions"></th>
          </tr>
        </thead>
        <tbody>
          @for (item of upcomingUebungen(); track item.id) {
            <tr class="row-hover">
              <td>
                <div class="date-badge">
                  <span class="day">{{ formatDate(item.datum).day }}</span>
                  <span class="month">{{ formatDate(item.datum).month }}</span>
                </div>
              </td>
              <td>
                <div class="motto-cell">
                  <span class="motto-text">{{ item.motto }}</span>
                  <span class="motto-sub">Samstagsübung</span>
                </div>
              </td>
              <td>
                <div class="stufen-tags">
                  @for (stufe of item.stufen; track stufe) {
                    <span class="stufe-tag" [attr.data-stufe]="getStufeName(stufe)">
                      {{ getStufeName(stufe) }}
                    </span>
                  }
                </div>
              </td>
              <td>
                <span class="status-pill active">
                  <span class="dot"></span>
                  Geplant
                </span>
              </td>
              <td class="actions">
                <button class="row-action-btn" aria-label="Bearbeiten" [routerLink]="['/admin/uebungen/edit', item.id]">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg>
                </button>
              </td>
            </tr>
          }
          @if (upcomingUebungen().length === 0) {
            <tr>
              <td colspan="5" class="empty-state">
                Keine anstehenden Übungen gefunden.
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
