<div class="login-wrapper">
  <div class="login-card">
    <div class="login-header">
      <div class="logo-circle">
        <img src="assets/images/logo.svg" alt="Pfadi Logo" />
      </div>
      <h1>Wägwiiser Admin</h1>
      <p>Melde dich an, um deinen Trupp zu verwalten.</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate class="login-form">
      <div class="form-group">
        <label for="email">E-Mail</label>
        <div class="input-wrapper">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="name@pfadiflums.ch"
            autocomplete="email"
            [attr.aria-invalid]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
          />
        </div>
        @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
          <span class="error-text" role="alert">Gültige E-Mail erforderlich</span>
        }
      </div>

      <div class="form-group">
        <label for="password">Passwort</label>
        <div class="input-wrapper">
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="••••••••"
            autocomplete="current-password"
            [attr.aria-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
          />
        </div>
        @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
          <span class="error-text" role="alert">Passwort erforderlich (min. 6 Zeichen)</span>
        }
      </div>

      @if (errorMessage()) {
        <div class="alert alert-error" role="alert">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>
          {{ errorMessage() }}
        </div>
      }

      <button type="submit" class="submit-btn" [disabled]="isLoading()">
        @if (isLoading()) {
          <span class="spinner"></span>
          Wird geladen...
        } @else {
          Anmelden
        }
      </button>
    </form>

    <div class="divider">
      <span>oder</span>
    </div>

    <button type="button" class="midata-btn" (click)="onMidataLogin()">
      <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
      Mit MiData anmelden
    </button>

    <div class="login-footer">
      <p>&copy; 2026 Pfadi St. Justus Flums</p>
    </div>
  </div>
</div>
